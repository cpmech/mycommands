\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{mycommands}[2016/03/23 Some commands - Dorival Pedroso]

% labels ===========================================================================================

\newcommand{\tabname} {Table}
\newcommand{\tabnames}{Tables}
\newcommand{\figname} {Fig.}
\newcommand{\fignames}{Figs.}
\newcommand{\eqname}  {Eq.}
\newcommand{\eqnames} {Eqs.}

% basic packages ===================================================================================

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{booktabs}
\usepackage{nicefrac}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{accents}
\usepackage{cancel}
\usepackage{fancyvrb} % verbatim
\usepackage{import}
\usepackage{stmaryrd} % for \llbracket and \rrbracket. Requires:  sudo apt-get install texlive-math-extra
\usepackage{empheq} % for boxed equations
\usepackage[most]{tcolorbox} % for colorfou boxed equations
\usepackage{listings}

% some symbols for verbatim ========================================================================

%\usepackage[utf8]{inputenc}
%\DeclareUnicodeCharacter{394}{$\Delta$}
%\DeclareUnicodeCharacter{211D}{\mathbb{R}}

% url ==============================================================================================

\usepackage{url}
\usepackage{hyperref}
\hypersetup{breaklinks=true,colorlinks=true,citecolor=black,filecolor=black,linkcolor=black,urlcolor=black}

% colors ===========================================================================================

\definecolor{darkgray}   {rgb} {0.3  , 0.3  , 0.3 }
\definecolor{darkgreen}  {rgb} {0.02 , 0.4  , 0.02}
\definecolor{darkyellow} {rgb} {1    , 0.54 , 0.25}
\definecolor{darkred}    {rgb} {0.55 , 0    , 0.14}

\definecolor{codebg} {HTML} {e7e7e7}

% figures ==========================================================================================

% set spaces for figures
\newcommand{\setspacesfigures}{
    \renewcommand{\topfraction}{0.9}	% max fraction of floats at top
    \renewcommand{\bottomfraction}{0.9}	% max fraction of floats at bottom
    %   Parameters for TEXT pages (not float pages):
    \setcounter{topnumber}{2}
    \setcounter{bottomnumber}{2}
    \setcounter{totalnumber}{4}     % 2 may work better
    \setcounter{dbltopnumber}{2}    % for 2-column pages
    \renewcommand{\dbltopfraction}{0.95}	% fit big float above 2-col. text
    \renewcommand{\textfraction}{0.01}	% allow minimal text w. figs
    %   Parameters for FLOAT pages (not text pages):
    \renewcommand{\floatpagefraction}{0.7}	% require fuller float pages
    % N.B.: floatpagefraction MUST be less than topfraction !!
    \renewcommand{\dblfloatpagefraction}{0.7}	% require fuller float pages
}

% algorithms =======================================================================================

\usepackage[ruled,vlined]{algorithm2e}
\SetAlgoCaptionSeparator{.}
\newcommand{\Lcom}  [1]{\textcolor{darkgray}{\tcp{#1}}}
\newcommand{\LcomIf}[1]{\textcolor{darkgray}{\ttfamily // #1}}
\newcommand{\Rcom}  [1]{\textcolor{darkgray}{\tcp*[r]{#1}}}
\newcommand{\RcomIf}[1]{\textcolor{darkgray}{\tcp*[f]{#1}}}
\newenvironment{Algo}{\begin{algorithm}}{\end{algorithm}}

% highlight equations =============================================================================

\newenvironment{Eqbox}{\empheq[box=\tcboxmath]{equation*}}{\endempheq}

% keywords =========================================================================================

\newcommand{\KwFalse}   {\mathrm{false}}
\newcommand{\KwTrue}    {\mathrm{true}}
\newcommand{\KwINF}     {\mathrm{INF}}
\newcommand{\KwNot}     {\textup{not}~}
\newcommand{\KwAnd}     {\textup{and}~}
\newcommand{\KwOr}      {\textup{or}~}
\newcommand{\KwAll}     {\textup{all}}
\newcommand{\KwNew}     {\textup{new}}
\newcommand{\KwOld}     {\textup{old}}
\newcommand{\KwCur}     {\textup{cur}}
\newcommand{\KwCte}     {\textup{cte}}
\newcommand{\KwTrial}   {\textup{trial}}
\newcommand{\KwContinue}{\bf continue}

% basic math =======================================================================================

\newcommand{\REAL}{\mathcal{R}}

% auxiliary macros =================================================================================

\newcommand{\RE}         {{\mathbb R}}
\newcommand{\suchthat}   {\;|\;}
\newcommand{\pluseq}     {\mathrel{+}=}
\newcommand{\minuseq}    {\mathrel{-}=}
\newcommand{\tquad}  [1] {\quad\text{#1}\quad}
\newcommand{\tqquad} [1] {\qquad\text{#1}\qquad}
\newcommand{\ra}         {\rightarrow}
\newcommand{\RA}         {\Rightarrow}
\newcommand{\la}         {\leftarrow}
\newcommand{\ACR}        {\notag\\}
\newcommand{\MCR}        {\\[3pt]}
\newcommand{\MCRx}       {\\[6pt]}
\newcommand{\BRK}        {\ACR&& {}}
\newcommand{\UB}     [2] {\underbrace{#1}_{#2}}
\newcommand{\UBr}    [2] {\underbrace{#1}_{\mathrlap{\hookrightarrow\,{#2}}}}
\newcommand{\UBt}    [2] {\underbrace{#1}_{\mathrlap{\hookrightarrow\,{\text{#2}}}}}
\newcommand{\UBtl}   [2] {\underbrace{#1}_{\mathllap{{\text{#2}}\,\hookleftarrow}}}
\newcommand{\Szm}        {\hphantom{-}}                            % size of minus sign
\newcommand{\Szn}        {\hphantom{4}}                            % size of a number
\newcommand{\RInew}  [1] {{#1}^{n+1}}
\newcommand{\RIold}  [1] {{#1}^{n}}
\newcommand{\triprod}[3] {{\llbracket #1 \;\, #2 \;\, #3 \rrbracket}}
\newcommand{\CQD}        {\qquad\blacksquare}
\newcommand{\LBB}        {{Lady\v{z}enskaja}-{Babu\v{s}ka}-Brezzi}

% integer division and modulo operators ============================================================

\DeclareMathOperator{\idiv}{\backslash} % integer division
\DeclareMathOperator{\imod}{\%}         % modulo operator
\DeclareRobustCommand{\IDIV} [1] {\accentset{\thicksim}{#1}} % integer division function
\DeclareRobustCommand{\IMOD} [1] {\underaccent{\thicksim}{#1}} % modulo operator function

% tensors ==========================================================================================

\newcommand{\TENSY}{{\mbox{\small\bfseries .}}}
\newcommand{\TENSYMFI}{\TENSY}
\newcommand{\TENSYMSE}{\TENSY\TENSY}
\newcommand{\TENSYMTH}{\TENSY\TENSY\TENSY}
\newcommand{\TENSYMFO}{\TENSY\TENSY\TENSY\TENSY}
\DeclareRobustCommand{\tFi} [1] {\underaccent{\TENSYMFI}{\boldsymbol{#1}}} % first order tensor
\DeclareRobustCommand{\tSe} [1] {\underaccent{\TENSYMSE}{\boldsymbol{#1}}} % second order tensor
\DeclareRobustCommand{\tTh} [1] {\underaccent{\TENSYMTH}{\boldsymbol{#1}}} % third order tensor
\DeclareRobustCommand{\tFo} [1] {\underaccent{\TENSYMFO}{\boldsymbol{#1}}} % fourth order tensor

% tensors: operators ===============================================================================

\makeatletter
\newcommand*\bigcdot{\mathpalette\bigcdot@{.45}}
\newcommand*\bigcdot@[2]{\mathbin{\vcenter{\hbox{\scalebox{#2}{$\m@th#1\bullet$}}}}}
\makeatother

\DeclareMathSymbol{\dco}{\mathbin}{operators}{"3A} % double contraction

\newcommand{\sco}       {\bigcdot}             % single contraction
\newcommand{\dy}        {\otimes}              % conventional dyadic
\newcommand{\dyL}       {\overline{\otimes}}   % leaf dyadic => ik jl
\newcommand{\dyP}       {\underline{\otimes}}  % palm dyadic => il jk
\newcommand{\leafX} [2] {{#1}_{ik}\,{#2}_{jl}} % components of leaf dyadic
\newcommand{\palmX} [2] {{#1}_{il}\,{#2}_{jk}} % components of palm dyadic
\newcommand{\cross}     {\times}               % cross product

% operators ========================================================================================

\DeclareMathOperator*{\minimise}{minimise}
\DeclareMathOperator {\subjecto}{subject~to}
\DeclareMathOperator {\atan}    {atan}
\DeclareMathOperator {\sinX}    {suqsin}
\DeclareMathOperator {\cosX}    {suqcos}
\DeclareMathOperator {\sign}    {sign}
\DeclareMathOperator {\Rms}     {rms}
\DeclareMathOperator {\diV}     {div}
\DeclareMathOperator {\diVV}    {\underaccent{\TENSY}{{\boldsymbol{\mathrm{div}}}}}
\DeclareMathOperator {\Grad}    {\underaccent{\TENSY}{{\boldsymbol{\nabla}}}}
\DeclareMathOperator {\Gradd}   {\underaccent{\TENSY\TENSY}{{\boldsymbol{\nabla}}}}
\DeclareMathOperator {\Graddd}  {\underaccent{\TENSY\TENSY\TENSY}{{\boldsymbol{\nabla}}}}
\DeclareMathOperator {\tr}      {tr}
\DeclareMathOperator {\deV}     {\tSe{dev}}
\DeclareMathOperator {\fsum}    {sum}
\DeclareMathOperator {\fcols}   {cols}
\DeclareMathOperator {\frows}   {rows}

% functions ========================================================================================

\newcommand{\Exp}   [1] {\mathrm{e}^{#1}}     % exponential
\newcommand{\norm}  [1] {\lVert#1\rVert}      % Euclidean norm (or using \|#1\|_2)
\newcommand{\abs}   [1] {|#1|}
\newcommand{\ramp}  [1] {\langle#1\rangle}
\newcommand{\sramp} [1] {\langle\langle#1\rangle\rangle}
\newcommand{\heav}  [1] {\langle#1\rangle'}
\newcommand{\step}  [1] {\mathcal{S}(#1)}
\newcommand{\dd}    [1] {\accentset{\mbox{\small\bfseries .}}{#1}} % dot operator (time derivative)
\newcommand{\ddd}   [1] {\accentset{\mbox{\small\bfseries ..}}{#1}} % dot operator (2nd time derivative)

% differentiation ==================================================================================

\newcommand{\At}     [2] {\left.{#1}\right\rvert_{#2}}
\newcommand{\diFpar} [2] {\frac{\mathrm{d}}{\mathrm{d} #1}#2}
\newcommand{\diF}    [2] {\frac{\mathrm{d}#1}{\mathrm{d}#2}}
\newcommand{\diFF}   [2] {\frac{\mathrm{d}^2 #1}{\mathrm{d} #2^2}}
\newcommand{\pdiF}   [2] {\frac{\partial #1}{\partial #2}}
\newcommand{\pdiFF}  [2] {\frac{\partial^2 #1}{\partial #2^2}}
\newcommand{\pdiFFx} [3] {\frac{\partial^2 #1}{\partial #2 \partial #3}}
\newcommand{\grad}   [1] {\pdiF{#1}{\vx}}
\newcommand{\tpdiF}  [1] {\frac{\partial #1}{\partial t}} % Differentiate w.r.t time
\newcommand{\tdiF}   [1] {\frac{\mathrm{d} #1}{\mathrm{d}t}} % Differentiate w.r.t time
\newcommand{\tdiFF}  [1] {\frac{\mathrm{d}^2 #1}{\mathrm{d}t^2}} % Differentiate w.r.t time
\newcommand{\MdiF}       {\frac{\mathrm{D}}{\mathrm{D}t}}
\newcommand{\mdiF}   [1] {\frac{\mathrm{D} #1}{\mathrm{D}t}}
\newcommand{\mdiFF}  [2] {\frac{\mathrm{D}^{#1}#2}{\mathrm{D}t}}

% integration ======================================================================================

\newcommand{\dop}        {\mathrm{d}} % d-operator (upright)
\newcommand{\dVol}       {\mathrm{d\Omega}}
\newcommand{\dAre}       {\mathrm{d\Gamma}}
\newcommand{\intA}   [1] {\int_\mathrm{\Gamma}        #1\;\dAre}
\newcommand{\intAx}  [2] {\int_\mathrm{\Gamma^{#1}}   #2\;\dAre}
\newcommand{\intV}   [1] {\int_\mathrm{\Omega}        #1\;\dVol}
\newcommand{\intVx}  [2] {\int_\mathrm{\Omega_{#1}}   #2\;\dVol_{#1}}
\newcommand{\intAe}  [1] {\int_\mathrm{\Gamma_e}      #1\;\dAre}
\newcommand{\intAex} [2] {\int_\mathrm{\Gamma_e^{#1}} #2\;\dAre}
\newcommand{\intVe}  [1] {\int_\mathrm{\Omega_e}      #1\;\dVol}
\newcommand{\intVt}  [1] {\int_\mathrm{\Omega(t)}     #1\,\mathrm{d}\Omega}
\newcommand{\intVz}  [1] {\int_\mathrm{\Omega_0}      #1\,\mathrm{d}{\Omega}}
\newcommand{\integ}  [4] {\int_{#1}^{#2}              #3\,\mathrm{d}#4}

% constants ========================================================================================

\newcommand{\SQT}{\sqrt{2}}

% tensors: vectors =================================================================================

\newcommand{\va}   {\tFi{a}}
\newcommand{\vat}  {\tFi{\dd{a}}}
\newcommand{\vb}   {\tFi{b}}
\newcommand{\vbt}  {\tFi{\dd{b}}}
\newcommand{\vc}   {\tFi{c}}
\newcommand{\vct}  {\tFi{\dd{c}}}
\newcommand{\vd}   {\tFi{d}}
\newcommand{\ve}   {\tFi{e}}
\newcommand{\vE}   {\tFi{E}}
\newcommand{\veb}  {\tFi{\bar{e}}}
\newcommand{\vEb}  {\tFi{\bar{E}}}
\newcommand{\vet}  {\tFi{\dd{e}}}
\newcommand{\vf}   {\tFi{f}}
\newcommand{\vfb}  {\tFi{\bar{f}}}
\newcommand{\vft}  {\tFi{\dd{f}}}
\newcommand{\vphi} {\tFi{\phi}}
\newcommand{\vg}   {\tFi{g}}
\newcommand{\vdg}  {\mathrm{d}\tFi{g}}
\newcommand{\vgt}  {\tFi{\dd{g}}}
\newcommand{\vG}   {\tFi{G}}
\newcommand{\vh}   {\tFi{h}}
\newcommand{\vht}  {\tFi{\dd{h}}}
\newcommand{\vL}   {\tFi{L}}
\newcommand{\vn}   {\tFi{n}}
\newcommand{\vnu}  {\tFi{\hat{n}}}
\newcommand{\vu}   {\tFi{u}}
\newcommand{\vub}  {\tFi{\bar{u}}}
\newcommand{\vut}  {\tFi{\dd{u}}}
\newcommand{\vuExa}{\tFi{u}_\checkmark}
\newcommand{\vdu}  {\mathrm{d}\tFi{u}}
\newcommand{\vv}   {\tFi{v}}
\newcommand{\vvt}  {\tFi{\dd{v}}}
\newcommand{\vw}   {\tFi{w}}
\newcommand{\vwt}  {\tFi{\dd{w}}}
\newcommand{\vq}   {\tFi{q}}
\newcommand{\vqt}  {\tFi{\dd{q}}}
\newcommand{\vqb}  {\tFi{\bar{q}}}
\newcommand{\vr}   {\tFi{r}}
\newcommand{\vrb}  {\tFi{\bar{r}}}
\newcommand{\vs}   {\tFi{s}}
\newcommand{\vt}   {\tFi{t}}
\newcommand{\vtb}  {\tFi{\bar{t}}}
\newcommand{\vx}   {\tFi{x}}
\newcommand{\vxt}  {\tFi{\dd{x}}}
\newcommand{\vxtt} {\tFi{\ddd{x}}}
\newcommand{\vdx}  {\mathrm{d}\tFi{x}}
\newcommand{\vX}   {\tFi{X}}
\newcommand{\vy}   {\tFi{y}}
\newcommand{\vyb}  {\tFi{\bar{y}}}
\newcommand{\vth}  {\tFi{\theta}}
\newcommand{\vchi} {\tFi{\chi}}
\newcommand{\veta} {\tFi{\eta}}
\newcommand{\vksi} {\tFi{\xi}}
\newcommand{\vnab} {\tFi{\nabla}}
\newcommand{\vp}   {\tFi{p}}
\newcommand{\vQ}   {\tFi{Q}}
\newcommand{\vS}   {\tFi{S}}
\newcommand{\vV}   {\tFi{V}}
\newcommand{\vdS}  {\mathrm{d}\tFi{S}}
\newcommand{\vdV}  {\mathrm{d}\tFi{V}}
\newcommand{\vGamma}{\tFi{\Gamma}}
\newcommand{\vGammab}{\tFi{\bar{\Gamma}}}
\newcommand{\vzero}{\tFi{0}}

% tensors: 2nd order tensors =======================================================================

\newcommand{\ta}   {\tSe{a}}
\newcommand{\tb}   {\tSe{b}}
\newcommand{\tc}   {\tSe{c}}
\newcommand{\td}   {\tSe{d}}
\newcommand{\te}   {\tSe{e}}
\newcommand{\tE}   {\tSe{E}}
\newcommand{\tEb}  {\tSe{\bar{E}}}
\newcommand{\tk}   {\tSe{k}}
\newcommand{\tI}   {\tSe{I}}
\newcommand{\tF}   {\tSe{F}}
\newcommand{\tFt}  {\tSe{\dd{F}}}
\newcommand{\tJ}   {\tSe{J}}
\newcommand{\tg}   {\tSe{g}}
\newcommand{\tl}   {\tSe{\ell}}
\newcommand{\tsig} {\tSe{\sigma}}
\newcommand{\teps} {\tSe{\varepsilon}}
\newcommand{\tX}   {\tSe{X}}

% tensors: 3rd order tensors =======================================================================

\newcommand{\tta}   {\tTh{a}}
\newcommand{\ttksi} {\tTh{\xi}}

% tensors: 4th order tensors =======================================================================

\newcommand{\Ta}  {\tFo{a}}
\newcommand{\TD}  {\tFo{D}}
\newcommand{\TCe} {\tFo{C}^e}
\newcommand{\TDe} {\tFo{D}^e}

% finite differences method ========================================================================

\newcommand{\us} {u^{\star}}

% finite element method ============================================================================

\newcommand{\NELE}    {{N_\mathrm{ele}}}
\newcommand{\NNOD}    {{N_\mathrm{nod}}}
\newcommand{\NDOF}    {{N_\mathrm{dof}}}
\newcommand{\Sm}      {S^m}
\newcommand{\Smb}     {\bar{S}^m}
\newcommand{\Sn}      {S^n}
\newcommand{\Snb}     {\bar{S}^n}
\newcommand{\vgm}     {\tFi{g}^m}
\newcommand{\vGm}     {\tFi{G}^m}
\newcommand{\vGmb}    {\tFi{\bar{G}}^m}
\newcommand{\vGn}     {\tFi{G}^n}
\newcommand{\vGnb}    {\tFi{\bar{G}}^n}
\newcommand{\resm}    {r^m}
\newcommand{\fmTrs}   {f^m_\mathrm{trs}}
\newcommand{\fmExt}   {f^m_\mathrm{ext}}
\newcommand{\fmInt}   {f^m_\mathrm{int}}
\newcommand{\fm}      {f^m}
\newcommand{\Aop}     {\mathop{\text{\Large{A}}}}
\newcommand{\Assemb}  {\Aop_{e=1}^{\NELE}}
\newcommand{\equivEBC}{\overset{\text{\tiny EBC}}{\equiv}}

% FEM: matrix notation =============================================================================

\newcommand{\vC} [1] {\boldsymbol{#1}}
\newcommand{\mT} [1] {\boldsymbol{#1}}

\newcommand{\vecR}   {\vC{R}}
\newcommand{\vecu}   {\vC{u}}
\newcommand{\vecut}  {\vC{\dd{u}}}
\newcommand{\vecus}  {\vC{u^\star}}
\newcommand{\vecfExt}{\vC{f}_\mathrm{ext}}
\newcommand{\vecfInt}{\vC{f}_\mathrm{int}}
\newcommand{\matK}   {\mT{K}}
\newcommand{\matM}   {\mT{M}}

% goga: evolutionary algorithm =====================================================================

\newcommand{\goga}                   {{\sffamily Goga}}
\newcommand{\EpsH}                   {\epsilon_H}
\newcommand{\FnParetoComparison}     {{\ttfamily ParetoComparison}}
\newcommand{\FnCompareSolutions}     {{\ttfamily CompareSolutions}}
\newcommand{\FnMetrics}              {{\ttfamily Metrics}}
\newcommand{\FnParetoFronts}         {{\ttfamily ParetoFronts}}
\newcommand{\FnSorted}               {{\ttfamily Sorted}}
\newcommand{\FnCrowdingDistances}    {{\ttfamily CrowdingDistances}}
\newcommand{\FnEvolveOneGroup}       {{\ttfamily EvolveOneGroup}}
\newcommand{\FnExchangeViaTournament}{{\ttfamily ExchangeViaTournament}}
\newcommand{\FnExchangeOneRandomly}  {{\ttfamily FnExchangeOneRandomly}}
\newcommand{\FnSolve}                {{\ttfamily Solve}}
\newcommand{\FnDiffEvol}             {{\ttfamily DiffEvol}}
\newcommand{\FnCrossover}            {{\ttfamily Crossover}}
\newcommand{\FnMutation}             {{\ttfamily Mutation}}
\newcommand{\FnTournament}           {{\ttfamily Tournament}}
\newcommand{\FnFight}                {{\ttfamily Fight}}
\newcommand{\FnFlipCoin}             {{\ttfamily FlipCoin}}
\newcommand{\FnRealRand}             {{\ttfamily RealRand}}
\newcommand{\FnIntRand}              {{\ttfamily IntRand}}
\newcommand{\FnEnforceRange}         {{\ttfamily EnforceRange}}
\newcommand{\FnRealPart}             {{\ttfamily RealPart}}
\newcommand{\FnIntPart}              {{\ttfamily IntPart}}
\newcommand{\FnRunFEA}               {{\ttfamily RunFEA}}

% units ==============================================================================================

\newcommand {\UkPa}   {\mathrm{kPa}}
\newcommand {\Us}     {\mathrm{s}}
\newcommand {\Ums}    {\mathrm{m/s}}
\newcommand {\Umss}   {\mathrm{m/s^2}}
\newcommand {\UMgmmm} {\mathrm{Mg/m^3}}
\newcommand {\Unone}  {\mathrm{[-]}}

% coding ===========================================================================================

\newcommand {\code}         [1] {{\ttfamily #1}}
\newcommand {\fquoted}      [1] {{\ttfamily f\textquotesingle#1\textquotesingle}}
\newcommand {\singlequoted} [1] {{\ttfamily\textquotesingle#1\textquotesingle}}
\newcommand {\doublequoted} [1] {{\ttfamily\symbol{34}#1\symbol{34}}}
\newcommand {\triplequoted} [1] {{\ttfamily\textquotesingle\textquotesingle\textquotesingle#1\textquotesingle\textquotesingle\textquotesingle}}
\newcommand {\outFile}      [1] {{\small\VerbatimInput{#1}}}

% python source code ===============================================================================

\newcommand {\pythonInit} {\lstset{
language=python,
backgroundcolor=\color{codebg},
basicstyle=\ttfamily\small,
showstringspaces=false,
showspaces=false,
upquote=true,
}}

\newcommand {\pythonFile} [1] {\pythonInit\lstinputlisting{#1}}
\lstnewenvironment{python}{\pythonInit}{}
